@page "{ApplicationID:int?}"
@model GolfBAIST.Pages.EmployeeViewApplicationModel
@{
    ViewData["Title"] = "Review Member Application";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<div class="container mt-4">
    <h2>Review Membership Application</h2>

    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger">@TempData["Error"]</div>
    }

    @if (Model.Application != null)
    {
        <div class="card p-4 mb-4">
            <h5 class="mb-3">@Model.Application.FirstName @Model.Application.LastName</h5>

            <div class="row">
                <div class="col-md-6">
                    <p><strong>Email:</strong> @Model.Application.Email</p>
                    <p><strong>Phone:</strong> @Model.Application.Phone</p>
                    <p><strong>Alternate Phone:</strong> @Model.Application.AlternatePhone</p>
                    <p><strong>Date of Birth:</strong> @Model.Application.DateOfBirth.ToShortDateString()</p>
                    <p><strong>Occupation:</strong> @Model.Application.Occupation</p>
                    <p><strong>Company:</strong> @Model.Application.CompanyName</p>
                </div>
                <div class="col-md-6">
                    <p><strong>Address:</strong> @Model.Application.Address</p>
                    <p><strong>Postal Code:</strong> @Model.Application.PostalCode</p>
                    <p><strong>Consent to Email:</strong> @(Model.Application.ConsentToEmail ? "Yes" : "No")</p>
                    <p><strong>Agreement Acknowledged:</strong> @(Model.Application.AgreementAcknowledged ? "Yes" : "No")</p>
                    <p><strong>Membership Type ID:</strong> @Model.Application.MembershipTypeID</p>
                    <p><strong>Sponsor 1:</strong> @Model.Application.Sponsor1</p>
                    <p><strong>Sponsor 2:</strong> @Model.Application.Sponsor2</p>
                </div>
            </div>
        </div>

        <form method="post">
            <input type="hidden" name="ApplicationID" value="@Model.Application.ApplicationID" />

            <div class="form-group">
                <label for="DenialReason">Denial Reason (optional)</label>
                <textarea name="DenialReason" class="form-control" rows="3"></textarea>
            </div>

            <div class="mt-3">
                <button type="submit" name="action" value="Approve" class="btn btn-success">Approve</button>
                <button type="submit" name="action" value="Deny" class="btn btn-danger ml-2">Deny</button>
            </div>
        </form>

        <div class="mt-4">
            <a href="/EmployeePortal?tab=members" class="btn btn-outline-secondary">← Back to Member Applications</a>
        </div>

    }
    else
    {
        <p class="text-danger">Application not found.</p>
    }
</div>
